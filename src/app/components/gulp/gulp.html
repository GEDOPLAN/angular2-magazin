<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #8f5902; font-style: italic">//Deklaration der verwendeten Zusatzmodule</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">gulp</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">util</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-util&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">SystemBuilder</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;systemjs-builder&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">watch</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-watch&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">ts</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-typescript&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">tsConfig</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;./tsconfig.json&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">connect</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-connect&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">proxy</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;http-proxy-middleware&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">rimraf</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-rimraf&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">uglify</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-uglify&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">useref</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-useref&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">cssnano</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-cssnano&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">inlineNg2Template</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-inline-ng2-template&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">runSequence</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;run-sequence&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">del</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;del&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">maven</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">require</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;gulp-maven-deploy&#39;</span><span style="color: #000000; font-weight: bold">);</span>

<span style="color: #204a87; font-weight: bold">var</span> <span style="color: #000000">tsProject</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #000000">ts</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">createProject</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">tsConfig</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">compilerOptions</span><span style="color: #000000; font-weight: bold">);</span>

<span style="color: #8f5902; font-style: italic">// Kopiert alle externen JS-Dateien in den Ziel Ordner (dist/vendor)</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;copy:deps&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">([</span>
        <span style="color: #4e9a06">&#39;node_modules/jquery/dist/jquery.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/angular2/bundles/angular2-polyfills.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/angular2/bundles/angular2.dev.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/angular2/bundles/http.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/angular2/bundles/router.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/rxjs/bundles/Rx.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/systemjs/dist/system.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/bootstrap/dist/js/bootstrap.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
    <span style="color: #000000; font-weight: bold">]).</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist/vendor&#39;</span><span style="color: #000000; font-weight: bold">));</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Kopiert alle externen CSS-Dateien in den Ziel Ordner (dist/app/assets/css)</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;copy:styledeps&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">([</span>
        <span style="color: #4e9a06">&#39;node_modules/bootstrap/dist/fonts/*&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/font-awesome/fonts/*&#39;</span><span style="color: #000000; font-weight: bold">,</span>
    <span style="color: #000000; font-weight: bold">]).</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist/app/assets/fonts/&#39;</span><span style="color: #000000; font-weight: bold">));</span>

    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">([</span>
        <span style="color: #4e9a06">&#39;node_modules/bootstrap/dist/css/bootstrap.css&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;node_modules/font-awesome/css/font-awesome.css&#39;</span>
    <span style="color: #000000; font-weight: bold">]).</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist/app/assets/css&#39;</span><span style="color: #000000; font-weight: bold">));</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Kopiert unsere statischen Dateien in den Ziel Ordner (dist)</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;copy:src&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">([</span>
        <span style="color: #4e9a06">&#39;src/boot.js&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;src/index.html&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;src/**/*.html&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;src/**/*.css&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #4e9a06">&#39;src/**/*.png&#39;</span>
    <span style="color: #000000; font-weight: bold">])</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist&#39;</span><span style="color: #000000; font-weight: bold">))</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">connect</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">reload</span><span style="color: #000000; font-weight: bold">());</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Zielverzeichnis löschen</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;clean&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">cb</span><span style="color: #000000; font-weight: bold">)</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">del</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Kompiliet alle TypeScript Dateien ins Zielverzeichnis</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;compile:app&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;src/**/*.ts&#39;</span><span style="color: #000000; font-weight: bold">)</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">ts</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">tsProject</span><span style="color: #000000; font-weight: bold">))</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;./dist&#39;</span><span style="color: #000000; font-weight: bold">))</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">connect</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">reload</span><span style="color: #000000; font-weight: bold">());</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// erzeugt aus den HTML/CSS Dateien der Komponenten Inline-Elemente</span>
<span style="color: #8f5902; font-style: italic">// = aus templateUrl: &#39;some/url&#39; wird template: &#39;&lt;html&gt;....&#39;</span>
<span style="color: #8f5902; font-style: italic">// = Minimierung der Requests</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;build:inline&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;src/**/*.ts&#39;</span><span style="color: #000000; font-weight: bold">)</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">inlineNg2Template</span><span style="color: #000000; font-weight: bold">({</span>
                <span style="color: #000000">base</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;/src&#39;</span><span style="color: #000000; font-weight: bold">,</span>
                <span style="color: #000000">target</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;es5&#39;</span>
            <span style="color: #000000; font-weight: bold">}))</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">ts</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">tsProject</span><span style="color: #000000; font-weight: bold">))</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist&#39;</span><span style="color: #000000; font-weight: bold">));</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Minimierung der Dateigrößen von JavaScript Dateien</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;build:uglify&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">([</span><span style="color: #4e9a06">&#39;dist/*.js&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;dist/**/*.js&#39;</span><span style="color: #000000; font-weight: bold">])</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">uglify</span><span style="color: #000000; font-weight: bold">())</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;./dist&#39;</span><span style="color: #000000; font-weight: bold">));</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Minimierung der Dateigrößen von CSS Dateien</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;build:cssnano&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist/**/*.css&#39;</span><span style="color: #000000; font-weight: bold">)</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">cssnano</span><span style="color: #000000; font-weight: bold">())</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;./dist&#39;</span><span style="color: #000000; font-weight: bold">));</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Ersetzt die Script/CSS Referenzen in der HTML Datei mit unseren minimierten Versionen</span>
<span style="color: #8f5902; font-style: italic">// Dazu existieren in der index.html speziell ausgezeichnete Bereiche</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;build:useref&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist/index.html&#39;</span><span style="color: #000000; font-weight: bold">)</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">useref</span><span style="color: #000000; font-weight: bold">())</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">dest</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist&#39;</span><span style="color: #000000; font-weight: bold">));</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Entfernen der nicht minimierten Versionen und Komponenten Dateien </span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;build:clean&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">del</span><span style="color: #000000; font-weight: bold">([</span><span style="color: #4e9a06">&#39;dist/vendor&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;dist/app/assets/css&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;dist/app/components/**/*.html&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;dist/app/components/**/*.css&#39;</span><span style="color: #000000; font-weight: bold">]);</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Erzeugt aus dem Zielverzeichnis ein Maven-Artefakt und installiert dies im lokalen Repository</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;build:deploy-local&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">src</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;dist&#39;</span><span style="color: #000000; font-weight: bold">)</span>
            <span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">pipe</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">maven</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">install</span><span style="color: #000000; font-weight: bold">({</span>
                <span style="color: #4e9a06">&#39;config&#39;</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #000000; font-weight: bold">{</span>
                    <span style="color: #4e9a06">&#39;groupId&#39;</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;de.gedoplan&#39;</span><span style="color: #000000; font-weight: bold">,</span>
                    <span style="color: #4e9a06">&#39;type&#39;</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;war&#39;</span>
                <span style="color: #000000; font-weight: bold">}</span>
            <span style="color: #000000; font-weight: bold">}));</span>
<span style="color: #000000; font-weight: bold">});</span>


<span style="color: #8f5902; font-style: italic">// Default Task = Kompilieren und Kopieren der Dateien + Webserver starten</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;default&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;server&#39;</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">watch</span><span style="color: #000000; font-weight: bold">([</span><span style="color: #4e9a06">&#39;src/**/*.ts&#39;</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;compile:app&#39;</span><span style="color: #000000; font-weight: bold">]);</span>
    <span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">watch</span><span style="color: #000000; font-weight: bold">([</span><span style="color: #4e9a06">&#39;src/**/.js&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;src/**/*.html&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;src/**/*.css&#39;</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;copy:src&#39;</span><span style="color: #000000; font-weight: bold">]);</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;server&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #000000; font-weight: bold">[</span><span style="color: #4e9a06">&#39;copy:deps&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;copy:styledeps&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;copy:src&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;compile:app&#39;</span><span style="color: #000000; font-weight: bold">],</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">connect</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">server</span><span style="color: #000000; font-weight: bold">({</span>
        <span style="color: #000000">root</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;dist&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #000000">livereload</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #204a87; font-weight: bold">true</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #000000">port</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #0000cf; font-weight: bold">3000</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #000000">fallback</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;dist/index.html&#39;</span><span style="color: #000000; font-weight: bold">,</span>
        <span style="color: #000000">middleware</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">connect</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #000000">opt</span><span style="color: #000000; font-weight: bold">)</span> <span style="color: #000000; font-weight: bold">{</span>
            <span style="color: #204a87; font-weight: bold">return</span> <span style="color: #000000; font-weight: bold">[</span>
                <span style="color: #000000">proxy</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;/webresources&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #000000; font-weight: bold">{</span>
                    <span style="color: #000000">target</span><span style="color: #ce5c00; font-weight: bold">:</span> <span style="color: #4e9a06">&#39;http://localhost:8080&#39;</span>
                <span style="color: #000000; font-weight: bold">})</span>
            <span style="color: #000000; font-weight: bold">];</span>
        <span style="color: #000000; font-weight: bold">}</span>
    <span style="color: #000000; font-weight: bold">});</span>
<span style="color: #000000; font-weight: bold">});</span>

<span style="color: #8f5902; font-style: italic">// Produktions-Artefakt erzeugen: zusätzlich zu den Default-Tasks werden Code Optimierungen durchgeführt</span>
<span style="color: #000000">gulp</span><span style="color: #000000; font-weight: bold">.</span><span style="color: #000000">task</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;package&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">function</span> <span style="color: #000000; font-weight: bold">()</span> <span style="color: #000000; font-weight: bold">{</span>
    <span style="color: #000000">runSequence</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #4e9a06">&#39;copy:deps&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;copy:styledeps&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;copy:src&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;build:inline&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;build:uglify&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;build:cssnano&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;build:useref&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;build:clean&#39;</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #4e9a06">&#39;build:deploy-local&#39;</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #000000; font-weight: bold">});</span>
</pre></div>
